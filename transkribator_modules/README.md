# КиберКотик 119 - Модульная версия

## Описание
Модульная версия Telegram-бота КиберКотик для транскрибации видео и аудио файлов.
Бот извлекает аудио из видео, выполняет транскрипцию с помощью Whisper, 
и форматирует результат с использованием LLM.

## Структура проекта

```
transkribator_modules/
├── __init__.py                # Инициализация модуля
├── config.py                  # Конфигурация, переменные окружения, константы
├── main.py                    # Основная точка входа
├── audio/                     # Модули для работы с аудио
│   ├── __init__.py
│   └── extractor.py           # Извлечение аудио из видео
├── transcribe/                # Модули для транскрибации
│   ├── __init__.py
│   └── transcriber.py         # Транскрибация и форматирование
├── bot/                       # Модули для работы с Telegram API
│   ├── __init__.py
│   ├── commands.py            # Команды бота (/start, /help, и т.д.)
│   └── handlers.py            # Обработчики сообщений и колбэков
└── utils/                     # Вспомогательные модули
    ├── __init__.py
    └── processor.py           # Обработка видео и транскрипций
```

## Запуск

### Запуск в обычном режиме

Для запуска бота используйте скрипт `cyberkitty_modular.py` в корневой директории:

```bash
python cyberkitty_modular.py
```

Или сделайте его исполняемым:

```bash
chmod +x cyberkitty_modular.py
./cyberkitty_modular.py
```

### Запуск в tmux (рекомендуется для серверов)

Для запуска бота в tmux-сессии (бот будет работать в фоне даже после закрытия терминала):

```bash
./cyberkitty_tmux_start.sh
```

Для управления tmux-сессией:

1. Подключиться к сессии: `tmux attach -t cyberkitty_bot`
2. Отключиться от сессии (без остановки бота): нажмите `Ctrl+b`, затем `d`
3. Остановить бота: `./cyberkitty_tmux_stop.sh`

## Зависимости

- Python 3.7+
- python-telegram-bot
- whisper
- ffmpeg
- dotenv
- aiohttp
- tmux (для запуска в фоновом режиме)

## Настройка

1. Создайте файл `.env` в корневой директории с следующими переменными:
   ```
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   TELETHON_WORKER_CHAT_ID=ид_чата_воркера
   OPENROUTER_API_KEY=ваш_ключ_api
   OPENROUTER_MODEL=модель_llm
   ```

2. Установите необходимые зависимости:
   ```
   pip install -r requirements.txt
   ```

3. Убедитесь, что ffmpeg установлен в системе. 