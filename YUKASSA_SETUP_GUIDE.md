# üè¶ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –Æ–ö–∞—Å—Å—ã

## ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å –Ω–æ–≤—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

- **Shop ID:** `1146505`
- **Secret Key:** `live_HS1FeHDwDeAesa0mp0MmY01NmL9s-UJioHK5DOXt2Z8`

## üîß –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω –º–æ–¥—É–ª—å –Æ–ö–∞—Å—Å—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `transkribator_modules/payments/yukassa.py`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–µ–Ω—ã –ø–ª–∞–Ω–æ–≤ (PRO: 299‚ÇΩ, UNLIMITED: 699‚ÇΩ)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –ø–ª–∞–Ω–æ–≤

### 2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –Æ–ö–∞—Å—Å–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `initiate_yukassa_payment()` –≤ `payments.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã (Stars/–Æ–ö–∞—Å—Å–∞)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö –∫–æ–ª–±–µ–∫–æ–≤

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ª–±–µ–∫–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–ª–±–µ–∫–æ–≤ `buy_plan_pro_yukassa` –∏ `buy_plan_unlimited_yukassa`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `callbacks.py` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É

### 4. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –Æ–ö–∞—Å—Å—ã –≤ `config.py`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º

### 5. –î–æ–±–∞–≤–ª–µ–Ω webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω `yukassa_webhook.py` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –Æ–ö–∞—Å—Å—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ API —Å–µ—Ä–≤–µ—Ä (`/webhook/yukassa`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üíé –¢–∞—Ä–∏—Ñ—ã" –≤ –±–æ—Ç–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω (PRO –∏–ª–∏ UNLIMITED)
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:
   - **‚≠ê –ö—É–ø–∏—Ç—å PRO (Stars)** - –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars
   - **‚≠ê –ö—É–ø–∏—Ç—å PRO (–Æ–ö–∞—Å—Å–∞)** - –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É
4. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –Æ–ö–∞—Å—Å—ã –ø–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è –æ–ø–ª–∞—Ç—ã
5. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- Webhook URL: `https://your-domain.com/webhook/yukassa`
- –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏ –ø–ª–∞—Ç–µ–∂–µ–π –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –ª–æ–≥–∞—Ö –±–æ—Ç–∞

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ –Æ–ö–∞—Å—Å–µ

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Æ–ö–∞—Å—Å—ã
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "Webhook"
3. –î–æ–±–∞–≤—å—Ç–µ URL: `https://your-domain.com/webhook/yukassa`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è: `payment.succeeded`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –ø–ª–∞—Ç–µ–∂–µ–π:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞
docker logs cyberkitty19-transkribator-bot | grep -E "(yukassa|payment)"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ API —Å–µ—Ä–≤–µ—Ä–∞
docker logs cyberkitty19-transkribator-api | grep -E "(webhook|yukassa)"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```sql
SELECT * FROM transactions WHERE payment_provider = 'yukassa' ORDER BY created_at DESC;
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã:
- `transkribator_modules/payments/yukassa.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –Æ–ö–∞—Å—Å—ã
- `transkribator_modules/bot/payments.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º—É –ø–ª–∞—Ç–µ–∂–µ–π
- `transkribator_modules/bot/callbacks.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ª–±–µ–∫–æ–≤
- `transkribator_modules/config.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `transkribator_modules/bot/yukassa_webhook.py` - webhook –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- `api_server.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è webhook –≤ API —Å–µ—Ä–≤–µ—Ä

### –ù–æ–≤—ã–µ –∫–æ–ª–±–µ–∫–∏:
- `buy_plan_pro_stars` - –ø–æ–∫—É–ø–∫–∞ PRO —á–µ—Ä–µ–∑ Telegram Stars
- `buy_plan_pro_yukassa` - –ø–æ–∫—É–ø–∫–∞ PRO —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É
- `buy_plan_unlimited_stars` - –ø–æ–∫—É–ø–∫–∞ UNLIMITED —á–µ—Ä–µ–∑ Telegram Stars
- `buy_plan_unlimited_yukassa` - –ø–æ–∫—É–ø–∫–∞ UNLIMITED —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:
- ‚úÖ –í—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –æ–ø–ª–∞—Ç–æ–π —á–µ—Ä–µ–∑ Telegram Stars –∏ –Æ–ö–∞—Å—Å—É
- ‚úÖ –ü–æ–ª—É—á–∞—Ç—å —Å—Å—ã–ª–∫–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –í–∏–¥–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–ö–∞—Å—Å—É –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ


