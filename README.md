# Telegram Видео Транскрибатор

Telegram-бот для загрузки и транскрибации видео с помощью Whisper. Бот автоматически извлекает аудио из видео и преобразует его в текстовую транскрипцию.

## Возможности

- **Загрузка видео из различных источников:**
  - Прямая загрузка видео через Telegram (поддержка файлов до 2 ГБ)
  - Загрузка пересланных видео из других чатов
  - Загрузка видео по ссылкам YouTube
  - Загрузка видео по ссылкам Google Drive

- **Обработка видео:**
  - Извлечение аудио из видео с помощью ffmpeg
  - Разделение длинных аудиофайлов на части для более эффективной обработки
  - Транскрибация аудио с использованием модели Whisper через API DeepInfra

- **Особенности:**
  - Обход ограничения Telegram Bot API на загрузку файлов размером более 20 МБ с помощью Telethon
  - Асинхронная обработка для более быстрой работы
  - Надежная обработка ошибок и логирование

## Установка и настройка

### Предварительные требования

- Python 3.7+
- ffmpeg
- Зарегистрированное Telegram приложение (для API ID и API Hash)
- Токен Telegram бота от BotFather
- API ключ DeepInfra

### Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/videlboga/cyberkitty119.git
cd cyberkitty119
```

2. Создайте виртуальное окружение и установите зависимости:
```
python -m venv venv
source venv/bin/activate  # Для Windows: venv\Scripts\activate
pip install -r requirements.txt
```

3. Создайте файл `.env` в корневой директории проекта со следующими переменными:
```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
DEEPINFRA_API_KEY=ваш_api_ключ
TELEGRAM_API_ID=ваш_api_id
TELEGRAM_API_HASH=ваш_api_hash
TELEGRAM_PHONE_NUMBER=ваш_номер_телефона
```

4. Создайте необходимые директории (если они еще не созданы):
```
mkdir -p videos audio transcriptions
```

### Запуск

```
python bot.py
```

При первом запуске вам потребуется авторизовать Telethon-клиент (ввести код подтверждения, отправленный на ваш телефон).

## Использование

1. Начните общение с ботом, отправив команду `/start`
2. Отправьте видео одним из следующих способов:
   - Загрузите видео напрямую в чат с ботом
   - Перешлите сообщение с видео из другого чата
   - Отправьте ссылку на YouTube или Google Drive
3. Бот обработает видео и вернет текстовую транскрипцию

## План развития

- [ ] **1. Обработка транскрипции с помощью ЛЛМ**
  - Интеграция с OpenAI API или другими ЛЛМ для улучшения качества транскрипции
  - Исправление ошибок и улучшение пунктуации

- [ ] **2. Обработка транскрипции в более читаемую форму**
  - Разделение текста на параграфы
  - Определение говорящих (диаризация)
  - Форматирование текста для лучшей читаемости

- [ ] **3. Генерация таймкодов**
  - Добавление временных меток к транскрипции
  - Навигация по длинным транскрипциям с помощью таймкодов

- [ ] **4. Чат с ЛЛМ для обсуждения видео**
  - Возможность задавать вопросы по содержанию видео
  - Генерация резюме и выделение ключевых моментов
  - Создание заметок на основе содержания видео

## Технологии

- [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot) - основная библиотека для работы с Telegram Bot API
- [Telethon](https://github.com/LonamiWebs/Telethon) - библиотека для работы с Telegram API на уровне клиента
- [ffmpeg](https://ffmpeg.org/) - инструмент для обработки медиафайлов
- [pydub](https://github.com/jiaaro/pydub) - библиотека для обработки аудио
- [yt-dlp](https://github.com/yt-dlp/yt-dlp) - библиотека для загрузки видео с YouTube
- [gdown](https://github.com/wkentaro/gdown) - библиотека для загрузки файлов с Google Drive
- [Whisper](https://openai.com/research/whisper) (через API DeepInfra) - модель для транскрибации аудио

## Лицензия

[MIT](LICENSE) 